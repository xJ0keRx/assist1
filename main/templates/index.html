{% extends 'base.html'%}
{% load static %}
{% block title %} –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ {% endblock %}

{% block body-start %}
<body class="main-page">
{% endblock %}

{% block content %}
<main>
    <div class="container">
        <!-- –ì–µ—Ä–æ–∏—á–µ—Å–∫–∞—è —Å–µ–∫—Ü–∏—è —Å –ø–æ–∏—Å–∫–æ–º -->
        <section class="hero-search">
            <h1>–ù–∞–π–¥–∏—Ç–µ —Å–≤–æ—é —É–¥–∞—á—É</h1>
            <p>–°–∏—Å—Ç–µ–º–∞ —É–º–Ω–æ–≥–æ –ø–æ–¥–±–æ—Ä–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à—É –∏—Å—Ç–æ—Ä–∏—é –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –ª—É—á—à–∏–µ –ª–æ—Ç–µ—Ä–µ–∏</p>
            
            <!-- –ü–æ–∏—Å–∫–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –∏–∑ —Ö–µ–¥–µ—Ä–∞ -->
            <div class="search-box hero-search-box">
                <input type="text" placeholder="–ü–æ–∏—Å–∫ –ª–æ—Ç–µ—Ä–µ–π..." id="searchInput">
                <button onclick="performSearch()">üîç</button>
            </div>
        </section>

        <div class="modal-overlay" id="welcomeModal">
            <div class="modal-content">
                <div class="modal-glow"></div>
                <h2 class="modal-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                <p class="modal-subtitle">–í—ã –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞?</p>
                <div class="modal-actions">
                    <button class="btn btn-primary" id="newUserBtn">–î–∞, —è –Ω–æ–≤–∏—á–æ–∫</button>
                    <button class="btn btn-outline" id="oldUserBtn">–ù–µ—Ç, —è —É–∂–µ –∑–¥–µ—Å—å –±—ã–ª</button>
                </div>
            </div>
        </div>

        {% if questionnaire_completed and recommendations %}
        <section class="recommendations-main-section">
            <h2 class="section-title">üéØ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
            <p class="section-subtitle">–ü–æ–¥–æ–±—Ä–∞–Ω–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—Å –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π</p>

            <div class="recommendations-grid">
                {% for lottery in recommendations %}
                <div class="recommendation-lottery-card"
                    onclick="openLottery('{{ lottery.href }}', '{{ lottery.name }}')">
                    <div class="recommendation-match-badge">
                        –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ: {{ lottery.match_percentage }}%
                    </div>
                    <div class="recommendation-card-content">
                        {% if lottery.preview_img %}
                        <img src="{{ lottery.preview_img }}" alt="{{ lottery.name }}" class="recommendation-image">
                        {% endif %}
                        <div class="recommendation-info">
                            <h3 class="recommendation-name">{{ lottery.name }}</h3>
                            <div class="recommendation-details">
                                <span class="recommendation-price">{{ lottery.bet_cost }}</span>
                                <span class="recommendation-jackpot">{{ lottery.super_prize }}</span>
                            </div>
                            <div class="recommendation-type">{{ lottery.game_type }}</div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <section>
            <h2 class="section-title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ª–æ—Ç–µ—Ä–µ–∏</h2>
            <div class="lotteries-grid" id="lotteriesGrid" data-lotteries="{{ lotteries_json }}">
            </div>
        </section>

        <!-- –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–æ—Ç–µ—Ä–µ–∏ -->
        <section>
            <h2 class="section-title">–ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–æ—Ç–µ—Ä–µ–∏</h2>
            <div class="instant-images-grid" id="instantLotteriesGrid">
                {% for el in result %}
                <div class="instant-image-card"
                    onclick="openLottery('https://www.stoloto.ru/map/buy', '{{el.name}}')">
                    <div class="instant-image-container">
                        <img src="{{ el.preview_img }}" alt="{{el.name}}" class="instant-img">
                        <div class="instant-price-badge">{{ el.bet_cost }}</div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <div class="show-more-container" id="showMoreContainer">
                <button class="btn btn-outline show-more-btn" onclick="showMoreInstantLotteries()" id="showMoreBtn">
                    –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ
                </button>
            </div>
        </section>

        <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
        <section class="recommendations-section">
            <h2 class="section-title">–°–º–µ—à–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</h2>
            <div class="recommendation-grid">
                <div class="recommendation-card">
                    <div class="recommendation-icon">üìä</div>
                    <div class="recommendation-text">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</div>
                    <div class="recommendation-desc">–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤—ã–∏–≥—Ä—ã—à–µ–π</div>
                </div>
                <div class="recommendation-card">
                    <div class="recommendation-icon">üé∞</div>
                    <div class="recommendation-text">–ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä</div>
                    <div class="recommendation-desc">–ò–ò –ø–æ–¥–±–µ—Ä–µ—Ç –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç</div>
                </div>
                <div class="recommendation-card">
                    <div class="recommendation-icon">üèÜ</div>
                    <div class="recommendation-text">–¢–æ–ø –í—ã–∏–≥—Ä—ã—à–∏</div>
                    <div class="recommendation-desc">–°–∞–º—ã–µ –∫—Ä—É–ø–Ω—ã–µ –≤—ã–∏–≥—Ä—ã—à–∏ —Å–µ–≥–æ–¥–Ω—è</div>
                </div>
                <div class="recommendation-card">
                    <div class="recommendation-icon">‚è∞</div>
                    <div class="recommendation-text">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</div>
                    <div class="recommendation-desc">–í—Ä–µ–º—è —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π –ª–æ—Ç–µ—Ä–µ–π</div>
                </div>
            </div>
        </section>
    </div>
</main>
{% endblock %}

{% block js %}
<script src="{% static 'main/js/index.js' %}"></script>
{% endblock %}